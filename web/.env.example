# ==============================================================================
# Polymarket Hunter - Default Environment Configuration Template
# ==============================================================================
# 提示: DATABASE_URL, 私钥, API 密钥等敏感数据，请在本地复制此文件为 `.env.local`
# 然后在 `.env.local` 中填写真实值。绝对禁止提交敏感信息到代码库！
# ------------------------------------------------------------------------------

# ==========================================
# 1. 基础网络与节点配置 (Network & RPC)
# ==========================================
# 【必填 (Required)】当前运行的网络环境标识 (比如 localhost / amoy / polygon)
NEXT_PUBLIC_NETWORK=localhost

# 【必填 (Required)】当前网络的 Chain ID (Polygon主网=137, Hardhat跑本地=1337/31337)
NEXT_PUBLIC_CHAIN_ID=31337

# 【必填 (Required)】供前端与客户端使用的基础 RPC 访问节点地址
NEXT_PUBLIC_RPC_URL=http://127.0.0.1:8545

# 【可选 (Optional)】在本地或测试环境下复刻主网状态时使用的 RPC 地址 (Hardhat Fork)
MAINNET_FORK_RPC_URL="https://polygon-rpc.com"

# ==========================================
# 2. Polymarket 智能合约地址 (Smart Contracts)
# ==========================================
# 提示: 如果留空，通常会有默认 fallback (在对应网络下)

# 【可选 (Optional)】代理钱包工厂 (Proxy Factory) 智能合约地址，用于为新用户创建独立的代理钱包
NEXT_PUBLIC_PROXY_FACTORY_ADDRESS=

# 【可选 (Optional)】国库/资金池 (Treasury) 智能合约地址，用于接受手续费或者统一的全局资产沉淀
NEXT_PUBLIC_TREASURY_ADDRESS=

# 【可选 (Optional)】订单执行器 (Executor) 智能合约地址，专门负责将代打的交易动作在链上落地
NEXT_PUBLIC_EXECUTOR_ADDRESS=

# 【可选 (Optional)】USDC 稳定币的合约地址，系统内的核心计价和结算资产
NEXT_PUBLIC_USDC_ADDRESS=

# 【可选 (Optional)】Polymarket 官方的条件代币框架 (CTF) 合约地址
NEXT_PUBLIC_CTF_ADDRESS=

# 【可选 (Optional)】自主跟单机器人 (Bot) 的核心管理合约地址
NEXT_PUBLIC_BOT_ADDRESS=

# ==========================================
# 3. 核心密钥与鉴权 (Secrets & Auth)
# ==========================================
# 【必填 (Required)】核心业务数据库 Prisma 连接字符串 (例如 PostgreSQL 或 SQLite)
DATABASE_URL="file:./dev.db"

# 【可选 (Optional)】系统的真实交易发起钱包 (EOA) 私钥 (严禁提交代码库，填入 .env.local 即生效)
TRADING_PRIVATE_KEY=

# 【可选 (Optional)】系统的真实交易发起钱包助记词 (可与上述私钥二选一)
TRADING_MNEMONIC=

# 【可选 (Optional)】Polymarket 官方 CLOB 订单簿 API，用于现货鉴权 (必须与系统交易钱包一致)
POLY_API_KEY=
POLY_API_SECRET=
POLY_API_PASSPHRASE=

# 【可选 (Optional)】用于数据库中敏感信息落库加密保护的 256位混淆密钥 (本地可随意设长字符串)
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# 【可选 (Optional)】前端与一般业务的高速缓存 Redis 连接串
REDIS_URL=redis://localhost:6379

# 【可选 (Optional)】后台跟单大本营专用的 Redis，强烈建议和前端分库以防止高频更新时互相冲刷
SUPERVISOR_REDIS_URL=redis://localhost:6379

# 【可选 (Optional)】定时任务 (Cron Jobs) 触发网关的唯一安全鉴权令牌，放置接口被恶意外部调用
CRON_SECRET=

# 【可选 (Optional)】系统的超级管理员全局钱包地址列表 (逗号分隔，如需多个 Admin 共存)
ADMIN_WALLETS=

# ==========================================
# 4. 跟单交易引擎核心参数 (Copy Trading Execution)
# ==========================================
# 【可选 (Optional)】是否开启真实跟单？=false时只会打印执行日志或发送模拟订单，不会消耗真实资金
ENABLE_REAL_TRADING=false

# 【可选 (Optional)】上游跟单工作节点(Worker)向这台主控 API 服务器汇报和拉取任务 (通常为这台宿主机的 URL)
COPY_TRADING_API_URL=http://localhost:3000

# 【可选 (Optional)】专门留给高频发信后台的独立 RPC 节点（独立配置防止和前端抢夺请求额度被限流）
COPY_TRADING_RPC_URL=

# 【可选 (Optional)】备用发信 RPC 节点池列表 (逗号分隔)，当出现 429 或 503 时系统会自动故障转移接力发单
COPY_TRADING_RPC_URLS=

# 【可选 (Optional)】紧急熔断总控开关 - 一旦设为 true 后立刻中止全部跟单动作，只读不发
COPY_TRADING_EMERGENCY_PAUSE=false

# 【可选 (Optional)】虚构执行 (Dry Run) 模式：开启后会走完风控计算与配额等所有内部校验，但是最后一刻不提交上链
COPY_TRADING_DRY_RUN=false

# ==========================================
# 5. 风控与安全限制 (Risk Management & Guardrails)
# ==========================================
# 【可选 (Optional)】整个系统单日总计允许的最大跟单支出绝对总额限度 (USD)
COPY_TRADING_DAILY_CAP_USD=

# 【可选 (Optional)】针对每一个代理终端钱包的单日最高连续支出绝对总额限度 (USD)
COPY_TRADING_WALLET_DAILY_CAP_USD=

# 【可选 (Optional)】针对每一个特定热门市场设定的全系统级别最高追单支出的最大阈值 (USD)
COPY_TRADING_MARKET_DAILY_CAP_USD=

# 【可选 (Optional)】针对"单笔单次"发出交易时允许的最大绝对金额，超过直接阻断 (USD)
COPY_TRADING_MAX_TRADE_USD=

# 【可选 (Optional)】极少数高频发单防刷限制：指定一个固定时间窗内最大允许连续产生的订单次数
COPY_TRADING_MAX_TRADES_PER_WINDOW=

# 【可选 (Optional)】上述高频发单防刷的固定统计时间窗跨度 (毫秒，600000 即代表 10 分钟)
COPY_TRADING_TRADE_WINDOW_MS=600000

# 【可选 (Optional)】被控代理钱包至少要保留多少 MATIC 余粮，低于该数值系统会因预防 Gas 耗干而拒接单
COPY_TRADING_MIN_WALLET_MATIC=0.1

# 【可选 (Optional)】代理钱包跟单后必须至少保留的最低安全 USDC 数额，防止本金一次性全部压空
COPY_TRADING_MIN_PROXY_USDC=1

# ==========================================
# 6. 后台监控与架构调优 (Supervisor & Architecture)
# ==========================================
# 【可选 (Optional)】监听信号接收器模式: WS_ONLY=全长链接, POLLING_ONLY=慢轮询, HYBRID=智能主备切换
COPY_TRADING_SIGNAL_MODE=HYBRID

# 【可选 (Optional)】Websocket 协议下是否强制向官方服务器发送地址过滤条件来极大减少无关消息造成的解码压力
COPY_TRADING_WS_FILTER_BY_ADDRESS=false

# 【可选 (Optional)】当 Websocket 空闲断开或长时间无心跳多少毫秒后自动断言为假死并执行重连
SUPERVISOR_WS_UNHEALTHY_THRESHOLD_MS=30000

# 【可选 (Optional)】HTTP 主动抓取(轮询)模式下设定的极速最小间歇停顿 (毫秒)
SUPERVISOR_POLLING_BASE_INTERVAL_MS=5000

# 【可选 (Optional)】HTTP 轮询如果在夜间一直无人交易时，最慢会退避拉长休眠至这个时长 (毫秒)
SUPERVISOR_POLLING_MAX_INTERVAL_MS=10000

# 【可选 (Optional)】单次发起一次 HTTP 轮询时，最多向官方服务端索要多少条最新历史行动轨迹
SUPERVISOR_POLLING_LIMIT=200

# ==========================================
# 7. 结算与分类账 (Settlement & Ledger)
# ==========================================
# 【可选 (Optional)】是否开启异步派彩系统的方式在后台计算玩家中奖金额并默默入账
COPY_TRADING_ASYNC_SETTLEMENT=false

# 【可选 (Optional)】如果下单挂单遇到网络错误，允许系统的底层最大自动重试次数
COPY_TRADING_MAX_RETRY_ATTEMPTS=2

# 【可选 (Optional)】重试失败的队列进行单次下潜避退与排队休息时间 (毫秒)
COPY_TRADING_RETRY_BACKOFF_MS=60000

# 【可选 (Optional)】脱链高频发车时是否开启内存“分类账本”来减少与区块链上的频繁查询交互摩擦
COPY_TRADING_LEDGER_ENABLED=false

# 【可选 (Optional)】内存分类账当由于高频堆积满足一定 USDC 利润差额时，触发一次强制真实上链清算核销
COPY_TRADING_LEDGER_FLUSH_AMOUNT=100

# ==========================================
# 8. 极速发单防夹模式 (Speed Mode & Mempool)
# ==========================================
# 【可选 (Optional)】内存池发单隐蔽通道提供商 (STANDARD=标准公开链内存池, ALCHEMY=使用加密防夹交易池)
MEMPOOL_PROVIDER=STANDARD

# 【可选 (Optional)】若设置了 ALCHEMY 的提供商配置项，则必须填写该防夹池对外的开发者 API Key
NEXT_PUBLIC_ALCHEMY_API_KEY=

# 【可选 (Optional)】是否一键开启极速模式 (即刻跳过大多数多余风控环节以争取速度优先最头上链抢跑)
COPY_TRADING_SPEED_MODE=false

# 【可选 (Optional)】系统对发送订单滑点的容忍度配置流: standard(标准稳定型)、speed(极高竞争型，换取上车几率)
COPY_TRADING_SPEED_PROFILE=standard

# 【可选 (Optional)】在极速模式下系统能接受盘口价发生剧烈跳变时的极限滑动底线 (80 BPS 代表 0.8% 溢价)
COPY_TRADING_MAX_SPREAD_BPS=80

# 【可选 (Optional)】系统去扫对手盘时要求该盘口必须大于多少 USDC 的假单深度，低于这深度的直接无视不跟
COPY_TRADING_MIN_DEPTH_USD=10

# ==========================================
# 9. 其他脚本特性 (Testing / Managed Wealth)
# ==========================================
# 【可选 (Optional)】用于本地模拟跟单测试用的假发起跟随器钱包
FOLLOWER_WALLET=

# 【可选 (Optional)】本地开发测监控时你指定死盯的某个特定巨鲸导师钱包地址 (Target)
TARGET_TRADER=

# 【可选 (Optional)】模拟器中每次测试发出信号不管大V花多少Ｕ，我都锁定扔进去多少绝对配资Ｕ
FIXED_COPY_AMOUNT=10

# 【可选 (Optional)】如果是端到端 (E2E) 自动化测试，这里设置能否借由此开关直接 Bypass 跳过登录窗进行注入压测
NEXT_PUBLIC_E2E_MOCK_AUTH=false

# 【可选 (Optional)】如果你开了 E2E 注入白条，用哪个钱包充当虚拟访客的会话身份
NEXT_PUBLIC_E2E_MOCK_WALLET=0x1111111111111111111111111111111111111111

# 【可选 (Optional)】前端自动化测试浏览器默认要爬虫并进行 UI 元素打点的宿主地址基址
PLAYWRIGHT_BASE_URL=http://127.0.0.1:3210
