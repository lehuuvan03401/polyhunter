# ==============================================================================
# Polymarket Hunter - Localhost Environment Configuration Template
# ==============================================================================
# 注意: 这里定义的环境变量 Prisma 无法直接加载！
# 请在 `prisma.config.ts` 里 import "dotenv/config";
# ------------------------------------------------------------------------------

# ==========================================
# 1. 基础网络与节点配置 (Network & RPC)
# ==========================================
# 【必填 (Required)】当前运行的网络环境标识 (比如 localhost / amoy / polygon)
NEXT_PUBLIC_NETWORK=localhost

# 【必填 (Required)】当前网络的 Chain ID (Polygon主网=137, Hardhat跑本地=1337/31337)
NEXT_PUBLIC_CHAIN_ID=1337

# 【必填 (Required)】供前端与客户端使用的基础 RPC 访问节点地址，本地开发用 Hardhat 自起的服务
NEXT_PUBLIC_RPC_URL=http://127.0.0.1:8545

# 【可选 (Optional)】在本地或者测试环境下复刻(Fork)某个主网最新切片状态时需要填写的请求节点以同步公网现时全真环境状态
MAINNET_FORK_RPC_URL="https://rpc.ankr.com/polygon/YOUR_KEY"

# 【可选 (Optional)】Polygon 网络专用的 Websocket RPC 节点链接
POLYGON_WS=wss://polygon-bor-rpc.publicnode.com

# ==========================================
# 2. 本地部署的智能合约地址 (Local Contracts)
# ==========================================
# 【必填 (Required)】本地环境上自跑脚本产出的代理钱包工厂智能合约，专门给虚拟号创立小马甲代扣中转金用
NEXT_PUBLIC_PROXY_FACTORY_ADDRESS=0xDeF8a62f50BA3B9f319B473c48928595A333acba

# 【必填 (Required)】用做所有打点结费和盈利留仓的归口中心(大金库主脑)的统战国库驻家合约基址
NEXT_PUBLIC_TREASURY_ADDRESS=0xF1a7a5060f22edA40b1A94a858995fa2bcf5E75A

# 【必填 (Required)】替马甲们统一将定好的单子带参数和签名落定最终写入主块的命令调度行刑官智能合约所在地
NEXT_PUBLIC_EXECUTOR_ADDRESS=0x18903fF6E49c98615Ab741aE33b5CD202Ccc0158

# 【必填 (Required)】用在系统全局计算胜负赔和当基础入油充点的核心法币结算代币USDC本地造假镜像地址
NEXT_PUBLIC_USDC_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174

# 【必填 (Required)】官方原生掌管多方结果事件判断判定结果和派彩结对框架的公服组件系统接口合址
NEXT_PUBLIC_CTF_ADDRESS=0x4D97DCd97eC945f40cF65F87097ACe5EA0476045

# 此处单独留给在后端不用客户端权限走接口做统收直接读档后台的单独定义
TREASURY_ADDRESS=0xF1a7a5060f22edA40b1A94a858995fa2bcf5E75A

# 提示: NEXT_PUBLIC_BOT_ADDRESS 请保存在 .env.local.secrets 中

# ==========================================
# 3. 核心密钥与鉴权 (Secrets & Auth)
# ==========================================
# 提示: 所有的数据库连接 (DATABASE_URL)、真实资产操作私钥 (TRADING_PRIVATE_KEY)、以及 Poly API 验证密钥，
# 建议绝不要配置在此例模板里，必须保存在 .env.local.secrets 或者运维平台的敏感保险丝里。

# 【必填 (Required)】用于数据库中敏感信息落库加密保护的 256位混淆密钥 (本地可随意设长字符串)
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# 【可选 (Optional)】前端与一般业务的高速缓存 Redis 连接串
REDIS_URL=redis://localhost:6379

# 【可选 (Optional)】后台跟单大本营专用的 Redis，强烈建议和前端分库以防止高频更新时互相冲刷
SUPERVISOR_REDIS_URL=redis://localhost:6379

# 【可选 (Optional)】给真实全线上环境单独指定云厂商或者独立微服务的 Prisma 连接池路线 (如 Vercel DB)
POSTGRES_PRISMA_URL=

# 【可选 (Optional)】定时任务 (Cron Jobs) 触发网关的唯一安全鉴权令牌，严禁接口被外界恶意投递触发
CRON_SECRET=

# 【可选 (Optional)】系统的超级管理员全局钱包地址列表 (逗号分隔，如需多个 Admin 权限共存)
ADMIN_WALLETS=

# ==========================================
# 4. 跟单交易引擎核心参数 (Copy Trading Execution)
# ==========================================
# 【必填 (Required)】是否开启真实跟单？=false时只会打印执行日志或发拟定预演，不会把真金白银烧进主网
ENABLE_REAL_TRADING=

# 【必填 (Required)】上游监控节点(Worker)向这台主控 API 服务器汇报和拉取核心指令的任务网关链接
COPY_TRADING_API_URL=http://localhost:3000

# 【可选 (Optional)】专门留给高频主网打点下单用的后台节点单独 RPC（防此后端频率与普通用户UI共用而被同时卡死限流）
COPY_TRADING_RPC_URL=

# 【可选 (Optional)】备用主网发信层 RPC 安全节点池 (逗号分隔)，当某个服务短时间抽风时会自我容灾保护发向备选
COPY_TRADING_RPC_URLS=

# 【可选 (Optional)】紧急主网熔断开关 - 遭遇极端不确定行情设置 true 后立刻中止系统的下单开火权，全部仅旁观
COPY_TRADING_EMERGENCY_PAUSE=false

# 【可选 (Optional)】主网“虚构执行”(Dry Run)模式：开启后会模拟算账并打印明细但不把 payload 真正拍上主网区块
COPY_TRADING_DRY_RUN=false

# ==========================================
# 5. 风控与安全限制 (Risk Management & Guardrails)
# ==========================================
# 【可选 (Optional)】整个代理系统单日全部大盘发单支出绝对总额硬上限控制 (无情拦断) (USD)
COPY_TRADING_DAILY_CAP_USD=

# 【可选 (Optional)】仅针对每单个独立终端代扣钱包能给其允许的单日连续输血或扣底的额度封顶 (USD)
COPY_TRADING_WALLET_DAILY_CAP_USD=

# 【可选 (Optional)】针对系统内的单个孤立标的(即Polymarket的某个预测市场)，总计单体被投入支出的天花板 (USD)
COPY_TRADING_MARKET_DAILY_CAP_USD=

# 【可选 (Optional)】使用 JSON 定义更精确复杂的针对各细致品类不同子市场限额风控规则
COPY_TRADING_MARKET_CAPS=

# 【可选 (Optional)】单笔最大可接受金额：对任何"单笔单次"发出交易时允许随波逐流的最大 U 数额，超发阻绝！(USD)
COPY_TRADING_MAX_TRADE_USD=

# 【可选 (Optional)】极少概率的高频恶意发单防刷限制：指定一个固定死的时间窗内能连续产生的合法追踪单数极点
COPY_TRADING_MAX_TRADES_PER_WINDOW=

# 【可选 (Optional)】上述高频防抖窗统计计量的物理时长跨区 (毫秒，例如 600000 即 10分钟一周期)
COPY_TRADING_TRADE_WINDOW_MS=600000

# 【可选 (Optional)】做底层油管交易前钱包至少要留存以保障不会空 Gas 的 MATIC 保护警戒额度 (10美分级)
COPY_TRADING_MIN_WALLET_MATIC=0.1

# 【可选 (Optional)】代理端钱包扣底交易后必须至少还存留垫底用作结算冗余的保命 USDC
COPY_TRADING_MIN_PROXY_USDC=1

# 【可选 (Optional)】系统在发飙发出大额风控警告推送给管理端的消息镇压频率压制器，让邮箱别爆炸 (毫秒)
COPY_TRADING_GUARDRAIL_LOG_INTERVAL_MS=60000

# 【可选 (Optional)】触发上条报警阈限前所需要系统自动尝试阻挡并积累了多少次的风控弹片收集总数
COPY_TRADING_GUARDRAIL_ALERT_THRESHOLD=20

# 【可选 (Optional)】执行者上岗白名单 - 如果设置了只有这个表里的跟单终端才会收到执行分派 (做灰度测试)
COPY_TRADING_EXECUTION_ALLOWLIST=

# 【可选 (Optional)】干活的主机分配标识许可验证，多进程时指定专属于某一台打手的工作包不被多打
COPY_TRADING_WORKER_ALLOWLIST=

# ==========================================
# 6. 后台监控与架构调优 (Supervisor & Architecture)
# ==========================================
# 【可选 (Optional)】主侦听接收器的捕获方案: WS_ONLY=低延迟全链, POLLING_ONLY=安全全搜, HYBRID=网兜混刷(默认最好)
COPY_TRADING_SIGNAL_MODE=HYBRID

# 【可选 (Optional)】当用 Websocket 通道时，是否强烈建议官方那头先做好 Filter 过滤发来我们关乎的那百来个大V
COPY_TRADING_WS_FILTER_BY_ADDRESS=false

# 【可选 (Optional)】Websocket 假如多久接收不到底层 Keep-Alive 会果段放弃重拉一次通道 (毫秒)
SUPERVISOR_WS_UNHEALTHY_THRESHOLD_MS=30000

# 【可选 (Optional)】信号源有效接收时效保护 - 发现这个轨迹超过设定好的追溯死窗即丢弃不跟以防止倒挂延误
SUPERVISOR_SIGNAL_SOURCE_WINDOW_MS=120000

# 【可选 (Optional)】HTTP 主动抓取(轮询)模式下设定的极速最小间歇停顿 (毫秒)
SUPERVISOR_POLLING_BASE_INTERVAL_MS=5000

# 【可选 (Optional)】HTTP 轮询如果在夜间一直无人交易时，最慢会退避拉长休眠至这个时长 (毫秒)
SUPERVISOR_POLLING_MAX_INTERVAL_MS=10000

# 【可选 (Optional)】单次发起一次 HTTP 轮询时，最多向官方服务端索要多少条最新历史行动轨迹
SUPERVISOR_POLLING_LIMIT=200

# 【可选 (Optional)】轮询索要历史日志最多查询回退多远的秒速，太远的毫无对冲跟随意义直接切断截流 (秒)
SUPERVISOR_POLLING_LOOKBACK_SECONDS=90

# 【可选 (Optional)】Worker 当前所在云集群打工位置切片下标 (例如开并排横向五台机器发的话，这是你的唯一身份标)
COPY_TRADING_WORKER_INDEX=0

# 【可选 (Optional)】任务主监控端向上承载解析事件的工作并发开出的 CPU 线程级利用强度
SUPERVISOR_WORKER_POOL_SIZE=10

# 【可选 (Optional)】将截取破译得到的订单并发下发传单给本地各待执行终端允许同时并进的扇出数极值
SUPERVISOR_FANOUT_CONCURRENCY=50

# 【可选 (Optional)】瞬间事件倾泻如洪流积攒塞死时，为保稳定，最多准许在内存排队候诊的大队列最大挂号数字
SUPERVISOR_QUEUE_MAX_SIZE=10000

# 【可选 (Optional)】Worker 向心系统询问是否全局修改了系统整体调头级大配的核心全量下刷生命周期 (千万毫秒)
SUPERVISOR_CONFIG_FULL_REFRESH_MS=3600000

# 【可选 (Optional)】热配表动态检查小幅度刷新比如黑榜大V又被换了哪些的新短命拉取心跳周期 (毫秒)
SUPERVISOR_CONFIG_REFRESH_MS=300000

# 【可选 (Optional)】拉取全线最新盘口数据的安全缓存有效保命期(用来拦 HTTP-429 疯狂报表异常死机) (毫秒)
COPY_TRADING_PRICE_TTL_MS=5000

# 【可选 (Optional)】阻绝跟单因消息堆叠引发同一人同一时间被下三次死重单事件的系统级幂等避震去重器(毫秒)
COPY_TRADING_IDEMPOTENCY_BUCKET_MS=5000

# 【可选 (Optional)】本地常开记录一切出入网动作大盘总账流水的文件宿址写盘挂载
ORDERS_LOG_PATH=./logs/orders.log

# ==========================================
# 7. 结算与分类账 (Settlement & Retries)
# ==========================================
# 【可选 (Optional)】主网跟单由于高峰发堵塞引发失败，底层最高放行的自行重启重试轮转总数量
COPY_TRADING_MAX_RETRY_ATTEMPTS=2

# 【可选 (Optional)】若失败一轮后的硬退避息影时长间隔避祸 (毫秒) 保护自己网卡不爆
COPY_TRADING_RETRY_BACKOFF_MS=60000
COPY_TRADING_RETRY_INTERVAL_MS=60000

# 【可选 (Optional)】是否在幕后开打慢算后台跑脚本方式异步将各家打手赚的金山算成佣金划水走
COPY_TRADING_ASYNC_SETTLEMENT=false

# 【可选 (Optional)】若是提款分佣这种要命的关隘由于底层掉线允许的最大续杯拉命重算重打频次数峰值
COPY_TRADING_SETTLEMENT_MAX_RETRY_ATTEMPTS=5

# 【可选 (Optional)】同类发生提款中断的下次下潜蛰伏呼吸静默期长点时效控制安全阈间隙
COPY_TRADING_SETTLEMENT_RETRY_BACKOFF_MS=60000

# 【可选 (Optional)】开不开启账本代算来防链上主表来回磨损 (高频专享特开脱链离表功能)
COPY_TRADING_LEDGER_ENABLED=false

# 【可选 (Optional)】虚拟做记录做到多少 USDC 偏差盈富时，迫于合规再真去向链上砸钱划拨出真实的账额
COPY_TRADING_LEDGER_FLUSH_AMOUNT=100

# 【可选 (Optional)】内存池记录烂库里拖延最大多久不向上同步结算也会被按头硬通汇款执行 (毫秒)
COPY_TRADING_LEDGER_MAX_AGE_MS=300000

# 【可选 (Optional)】给系统放贷的最大绝对风险暴露透支底限敞口额宽容值限度
COPY_TRADING_LEDGER_OUTSTANDING_CAP=0

# 【可选 (Optional)】分类账目强制的脉冲下刷入表动作心搏心率计时
COPY_TRADING_LEDGER_FLUSH_INTERVAL_MS=60000

# 【可选 (Optional)】当向全网账上锁抢写记表报错撞车时容许重碰的撞树最大定额次极限
COPY_TRADING_LEDGER_MAX_RETRY_ATTEMPTS=5

# 【可选 (Optional)】碰墙再重来的规避修养时隔跨界段
COPY_TRADING_LEDGER_RETRY_BACKOFF_MS=60000

# 【可选 (Optional)】做对账单包列队时对账的批量条数的极限单次上限提取参数
COPY_TRADING_LEDGER_CLAIM_BATCH=50

# ==========================================
# 8. Mempool 层防御与极速模式 (Speed Mode)
# ==========================================
# 【可选 (Optional)】主网推发执行节点层所连接厂商(推荐用 ALCHEMY 则从暗通道下黑手防抢白被剥头)
MEMPOOL_PROVIDER=STANDARD

# 【可选 (Optional)】配合使用防剥头暗道的该通道独有供应商通行门禁暗钥凭证
NEXT_PUBLIC_ALCHEMY_API_KEY=

# 【可选 (Optional)】主网速度与激情开关：一键丢齐身家风范不要防滑验证只求比原主更早零点零一秒上报打头
COPY_TRADING_SPEED_MODE=false

# 【可选 (Optional)】在高速公路上的驾驭侧滑参数风格模式定调（standard常规稳扎 / speed命都可以不要型速度压榨）
COPY_TRADING_SPEED_PROFILE=standard

# 【可选 (Optional)】高速跟风冲进盘口时为保命所允许承受市场砸到头上的最劣价差滑度痛点临界 (80BPS 即 0.8% 高价包容)
COPY_TRADING_MAX_SPREAD_BPS=80

# 【可选 (Optional)】这笔要追的盘子总不能用虚单骗炮让我接空刀，系统所要眼见的底层池必须大于此深度美元才真砸向他
COPY_TRADING_MIN_DEPTH_USD=10

# 【可选 (Optional)】对这比即将打出的金额比对着目标池的广度不能被自身资金填倒，放大的杠杆系数要求防虚比
COPY_TRADING_MIN_DEPTH_RATIO=1.2

# 【可选 (Optional)】系统在打底做滑动探摸预判未来时向底下多少层薄盘的层级去做数据吃水推算度
COPY_TRADING_DEPTH_LEVELS=5

# ==========================================
# 9. 托管资金流流转后台专向 (Managed Wealth)
# ==========================================
# 【可选 (Optional)】前端发起做向主营信托大盘充提指令汇调时要不要用户亲自点小狐狸去上EIP高规签名
NEXT_PUBLIC_MANAGED_WEALTH_SIGN_REQUESTS=true

# 【可选 (Optional)】接盘后台收到请调必须也开此配套的安检门栏去拆包验真伪才能落地放行
MANAGED_WEALTH_REQUIRE_SIGNATURE=true

# 【可选 (Optional)】信托托管主池资金更新结算循环机处理时的睡去打呼休眠停机周期 (毫秒)
MANAGED_WEALTH_LOOP_INTERVAL_MS=60000

# 【可选 (Optional)】切糕给客户发配息和分配对应投资大盘凭证份子额最高的一打单包多少人极限顶头
MANAGED_WEALTH_MAP_BATCH_SIZE=100

# 【可选 (Optional)】做币权清算去盘核实时发票更新子份额币圈市值的排队数打包下分
MANAGED_WEALTH_NAV_BATCH_SIZE=100

# 【可选 (Optional)】发结汇动作抛售清盘抛向公共池的大量平账队列打包最大拥堵上限数
MANAGED_WEALTH_SETTLEMENT_BATCH_SIZE=50

# 【可选 (Optional)】开机只清扫清结干活做扫尾跑一次流水完事了系统就在后台自尽以释放虚耗(=true用于云函数测试集成环境跑一环走人)
MANAGED_WEALTH_RUN_ONCE=false

# 【可选 (Optional)】做提篮校验或者放账操作给出的有权利最高控制核武器核对验票的超大主钱包
MW_VERIFY_ADMIN_WALLET=

# 【可选 (Optional)】如果有向内打桩互相发防跨请求微服务基址域名安防护城校验使用基核
MW_VERIFY_BASE_URL=

# ==========================================
# 10. 本地调试与 E2E 测试特性隔离带 (Simulation / Testing)
# ==========================================
# 【可选 (Optional)】假如非要跑个拟真测试向此丢指定模拟代打人用的充气仿生试错靶子钱包身分号
FOLLOWER_WALLET=

# 【可选 (Optional)】你在这个假定虚拟沙盘里你死盯咬死尾随不放的那个活的某个巨星的现实现址户口号
TARGET_TRADER=

# 【可选 (Optional)】只做虚拟盘不扣钱的当发现一次动静系统替你在脑海里打多大个定额U测试
FIXED_COPY_AMOUNT=10

# 【可选 (Optional)】做模拟投喂沙盒时采用策略(BUDGET_CONSTRAINED指有限U沙盘模型，跟没你预算就会停止发跟)
SIM_COPY_MODE=BUDGET_CONSTRAINED

# 【可选 (Optional)】收音机要接的频段：TRADER_ONLY(就专门逮我上边标的老唐那只羊)、或者全图开麦收听
SIM_ACTIVITY_FILTER=TRADER_ONLY

# 【可选 (Optional)】当起假WS拦你收测试假信息时服务端若抛错本地自己假起个安全网防炸飞退出测试调试台环境吗用开关
SIM_WS_SERVER_FILTER=false

# 【可选 (Optional)】要不要把给测试大爷放水让他们拿假条儿(无需小狐狸登录态)直接开门走无签门直接操作压测端 UI
NEXT_PUBLIC_E2E_MOCK_AUTH=false

# 【可选 (Optional)】如果你开了给大爷测试的门那大爷的这票证里得把大爷写成这个身世号码免登去假顶真做业务通关录制
NEXT_PUBLIC_E2E_MOCK_WALLET=0x1111111111111111111111111111111111111111

# 【可选 (Optional)】自动化机器点鼠标的 UI 截面探子做打点侦察发力爬进该基础大树 URL 树根
PLAYWRIGHT_BASE_URL=http://127.0.0.1:3210

# 【可选 (Optional)】开起给隔离环境自玩自测机器独有的一条专属空轨运行频段专岗专用防被平时3000混听
PLAYWRIGHT_PORT=3210
